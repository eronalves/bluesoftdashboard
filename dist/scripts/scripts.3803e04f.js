"use strict";var dashApp=angular.module("bluesoftdashboardApp",["ngResource","ngRoute","angular-advanced-poller","ui.moment-duration"]);dashApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),dashApp.factory("RankingGeral",["$http",function(a){return{get:function(){return a.get("https://bluesoftmusicvotacao-api.herokuapp.com/api/rankingVotacao")}}}]),dashApp.factory("RankingUltimaVotacao",["$http",function(a){return{get:function(){return a.get("https://bluesoftmusicvotacao-api.herokuapp.com/api/rankingUltimaVotacao")}}}]),dashApp.controller("MainCtrl",["$rootScope","$scope","$route","RankingUltimaVotacao","RankingGeral","PollerScheduler",function(a,b,c,d,e,f){if(d.get().then(function(a){b.rankingUltimaVotacao=a.data.votacao,b.rankingUltimaVotacao.votos=a.data.votos}),e.get().then(function(a){b.rankingGeral=a.data}),b.refresh=function(){c.reload()},!a.jobAdded){var g=moment.duration({seconds:30}),h=moment.duration({seconds:25});f.addJob({name:"refreshRank",priority:1,interval:g,timeout:h,run:b.refresh}),f.start(),a.jobAdded=!0}}]);